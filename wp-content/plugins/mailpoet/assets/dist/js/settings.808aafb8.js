"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[571],{43050:function(e,t,n){var a={};n.r(a),n.d(a,{loadSettings:function(){return N},openWoocommerceCustomizer:function(){return M},recalculateSubscribersScore:function(){return T},reinstall:function(){return A},saveSettings:function(){return I},sendCongratulatoryMssEmail:function(){return f},sendTestEmail:function(){return w},setErrorFlag:function(){return S},setSetting:function(){return y},setSettings:function(){return k},updateKeyActivationState:function(){return b},verifyMssKey:function(){return h},verifyPremiumKey:function(){return v}});var r={};n.r(r),n.d(r,{getAmazonSesOptions:function(){return J},getDefaultSegments:function(){return B},getKeyActivationState:function(){return $},getPages:function(){return W},getPaths:function(){return H},getSavingError:function(){return z},getSegments:function(){return q},getSendGridOptions:function(){return Y},getSetting:function(){return P},getSettings:function(){return Z},getTestEmailState:function(){return X},getWebHosts:function(){return j},hasErrorFlag:function(){return V},hasMembersPlugin:function(){return U},hasSavingError:function(){return R},hasWooCommerce:function(){return O},isBuiltInCaptchaSupported:function(){return G},isMssActive:function(){return x},isNewUser:function(){return K},isSaving:function(){return D}});var l={};n.r(l),n.d(l,{CALL_API:function(){return Q.Z},TRACK_REINSTALLED:function(){return te},TRACK_SETTINGS_SAVED:function(){return ee},TRACK_TEST_EMAIL_SENT:function(){return ne}});var i=n(45993),s=n.n(i),o=(n(7295),n(97846)),c=n.n(o),m=n(71304),u=n(61299),p=n(76867);let d,E,_,g;function b(e){return{type:"UPDATE_KEY_ACTIVATION_STATE",fields:e}}function*h(e){const{success:t,error:n,res:a}=yield{type:"CALL_API",endpoint:"services",action:"checkMSSKey",data:{key:e}};if(!t)return b({mssStatus:E.INVALID,mssMessage:n.join(" ")||null});const r={mssMessage:a.data.message||null},l=(0,u.Ys)(ue).getSettings();l.mta_group="mailpoet",l.mta={...l.mta,method:"MailPoet",mailpoet_api_key:e},l.signup_confirmation.enabled="1";const i=yield{type:"CALL_API",endpoint:"settings",action:"set",data:l};return i.success?(yield k(i.res.data),r.mssStatus=E.VALID_MSS_ACTIVE):r.mssStatus=E.VALID_MSS_NOT_ACTIVE,b(r)}function*v(e){var t,n,a;const{res:r,success:l,error:i}=yield{type:"CALL_API",endpoint:"services",action:"checkPremiumKey",data:{key:e}};var s;if(!l)return p.Z.trackEvent("User has failed to validate a Premium key",{"MailPoet Free version":p.Z.version,"Premium plugin is active":!!p.Z.premiumVersion}),b({premiumStatus:d.INVALID,premiumMessage:i.join(" ")||null,code:null==r||null===(s=r.meta)||void 0===s?void 0:s.code});yield y(["premium","premium_key"],e);const o=r.meta.premium_plugin_active;let c=d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE;return o&&(c=d.VALID_PREMIUM_PLUGIN_ACTIVE),yield b({premiumMessage:null,premiumStatus:c,code:null==r||null===(t=r.meta)||void 0===t?void 0:t.code,downloadUrl:null==r||null===(n=r.meta)||void 0===n||null===(a=n.premium_plugin_info)||void 0===a?void 0:a.download_link}),p.Z.trackEvent("User has validated a Premium key",{"MailPoet Free version":p.Z.version}),null}function*f(){const e=yield{type:"CALL_API",endpoint:"services",action:"sendCongratulatoryMssEmail"};return e&&e.success?b({congratulatoryMssEmailSentTo:e.res.data.email_address}):null}function y(e,t){return{type:"SET_SETTING",path:e,value:t}}function k(e){return{type:"SET_SETTINGS",value:e}}function S(e){return{type:"SET_ERROR_FLAG",value:e}}function*I(){yield{type:"SAVE_STARTED"};const e=(0,u.Ys)(ue).getSettings(),t=JSON.stringify(e),n=JSON.parse(t,((e,t)=>"string"==typeof t?t.trim():t)),{success:a,error:r,res:l}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:n};return a?(yield{type:"TRACK_SETTINGS_SAVED"},yield b({congratulatoryMssEmailSentTo:null,fromAddressModalCanBeShown:!1}),yield k(l.data),{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:r}}function*N(){const{success:e,error:t,res:n}=yield{type:"CALL_API",endpoint:"settings",action:"get"};return e?k(n.data):{type:"SAVE_FAILED",error:t}}function*A(){p.Z.Modal.loading(!0);const{success:e,error:t}=yield{type:"CALL_API",endpoint:"setup",action:"reset"};return p.Z.Modal.loading(!1),e?(yield{type:"TRACK_REINSTALLED"},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:t}}function*T(){return p.Z.Modal.loading(!0),yield{type:"CALL_API",endpoint:"settings",action:"recalculateSubscribersScore"},p.Z.Modal.loading(!1),{type:"SAVE_DONE"}}!function(e){e[e.INVALID=0]="INVALID",e[e.VALID_PREMIUM_PLUGIN_NOT_INSTALLED=1]="VALID_PREMIUM_PLUGIN_NOT_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_NOT_ACTIVE=2]="VALID_PREMIUM_PLUGIN_NOT_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_ACTIVE=3]="VALID_PREMIUM_PLUGIN_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_BEING_INSTALLED=4]="VALID_PREMIUM_PLUGIN_BEING_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_BEING_ACTIVATED=5]="VALID_PREMIUM_PLUGIN_BEING_ACTIVATED"}(d||(d={})),function(e){e[e.INVALID=0]="INVALID",e[e.VALID_MSS_NOT_ACTIVE=1]="VALID_MSS_NOT_ACTIVE",e[e.VALID_MSS_ACTIVE=2]="VALID_MSS_ACTIVE"}(E||(E={})),function(e){e[e.INSTALL_INSTALLING=0]="INSTALL_INSTALLING",e[e.INSTALL_ACTIVATING=1]="INSTALL_ACTIVATING",e[e.INSTALL_DONE=2]="INSTALL_DONE",e[e.INSTALL_INSTALLING_ERROR=3]="INSTALL_INSTALLING_ERROR",e[e.INSTALL_ACTIVATING_ERROR=4]="INSTALL_ACTIVATING_ERROR",e[e.ACTIVATE_ACTIVATING=5]="ACTIVATE_ACTIVATING",e[e.ACTIVATE_DONE=6]="ACTIVATE_DONE",e[e.ACTIVATE_ERROR=7]="ACTIVATE_ERROR"}(_||(_={})),function(e){e[e.SENDING=0]="SENDING",e[e.NONE=1]="NONE",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(g||(g={}));var C=n(68041);function*w(e,t){if(!e)return{type:"TEST_EMAIL_FAILED",error:[(0,C.t)("cantSendEmail")]};yield{type:"START_TEST_EMAIL_SENDING"};const n=yield{type:"CALL_API",endpoint:"mailer",action:"send",data:{mailer:t,newsletter:{subject:(0,C.t)("testEmailSubject"),body:{html:`<p>${(0,C.t)("testEmailBody")}</p>`,text:(0,C.t)("testEmailBody")}},subscriber:e}};return yield{type:"TRACK_TEST_EMAIL_SENT",success:n.success,method:t.method},n.success?{type:"TEST_EMAIL_SUCCESS"}:{type:"TEST_EMAIL_FAILED",error:n.error}}function*M(e){let t=e;if(!t){const{res:e,success:n,error:a}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:{"woocommerce.use_mailpoet_editor":1}};if(!n)return{type:"SAVE_FAILED",error:a};t=e.data.woocommerce.transactional_email_id}return window.location.href=`?page=mailpoet-newsletter-editor&id=${t}`,null}var L=n(96486),F=n.n(L);function P(e,t){return F().get(e.data,t)}function Z(e){return e.data}function D(e){return e.save.inProgress}function V(e){return e.flags.error}function R(e){return null!==e.save.error}function z(e){return e.save.error}function O(e){return e.flags.woocommerce}function U(e){return e.flags.membersPlugin}function G(e){return e.flags.builtInCaptcha}function K(e){return e.flags.newUser}function x(e){return"MailPoet"===F().get(e,"data.mta.method")}function q(e){return e.segments}function B(e){return e.segments.filter((e=>"default"===e.type))}function W(e){return e.pages}function $(e){return e.keyActivation}function H(e){return e.paths}function j(e){return{...e.hosts.web,manual:{name:(0,C.t)("notListed"),emails:25,interval:5}}}function J(e){return e.hosts.smtp.AmazonSES}function Y(e){return e.hosts.smtp.SendGrid}function X(e){return e.testEmail}var Q=n(25643);function ee(){const e=(0,u.Ys)(ue).getSettings(),t={"MailPoet Free version":p.Z.version,"Sending method type":e.mta_group||null,"Sending frequency (emails)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.emails,"Sending frequency (interval)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.interval,"Sending provider":"smtp"===e.mta_group&&e.smtp_provider,"Sign-up confirmation enabled":e.signup_confirmation&&e.signup_confirmation.enabled,"Bounce email is present":e.bounce&&""!==e.bounce.address,"Newsletter task scheduler method":e.cron_trigger&&e.cron_trigger.method};p.Z.isWoocommerceActive&&(t["WooCommerce email customizer enabled"]=e.woocommerce&&e.woocommerce.use_mailpoet_editor),p.Z.trackEvent("User has saved Settings",t)}function te(){p.Z.trackEvent("User has reinstalled MailPoet via Settings",{"MailPoet Free version":p.Z.version})}function ne({success:e,method:t}){p.Z.trackEvent("User has sent a test email from Settings",{"Sending was successful":!!e,"Sending method type":t,"MailPoet Free version":p.Z.version})}function ae(e){return t=>void 0===t?e:t?`${t}`:""}function re(e,t,n){return a=>void 0===a?n:a===e||a===t?a:a?e:t}function le(e,t){return n=>e.includes(n)?n:t}function ie(e){return t=>Object.keys(e).reduce(((n,a)=>({[a]:e[a](t?t[a]:void 0),...n})),{})}function se(e){return e}function oe(e){const t=ae(""),n=re("1","0","0"),a=re("1","0","1"),r=re("1","",""),l=re("1","","1"),i=(s=[],e=>F().isArray(e)?e.map(ae("")):s);var s;const o=le(["server","manual","AmazonSES","SendGrid"],"server");return ie({sender:ie({name:t,address:t}),reply_to:ie({name:t,address:t}),bounce:ie({address:t}),subscribe:ie({on_comment:ie({enabled:n,label:ae((0,C.t)("yesAddMe")),segments:i}),on_register:ie({enabled:n,label:ae((0,C.t)("yesAddMe")),segments:i})}),subscription:ie({pages:ie({manage:t,unsubscribe:t,confirmation:t,captcha:t,confirm_unsubscribe:t}),segments:i}),stats_notifications:ie({enabled:a,automated:a,address:t}),subscriber_email_notification:ie({enabled:l,address:t}),cron_trigger:ie({method:le(["WordPress","MailPoet","Linux Cron"],"WordPress")}),tracking:ie({enabled:l}),send_transactional_emails:r,deactivate_subscriber_after_inactive_days:le(["","90","180","365"],"180"),analytics:ie({enabled:r}),"3rd_party_libs":ie({enabled:r}),captcha:ie({type:le(["","built-in","recaptcha"],"built-in"),recaptcha_site_token:t,recaptcha_secret_token:t}),logging:le(["everything","errors","nothing"],"errors"),mta_group:le(["mailpoet","website","smtp"],"website"),mta:ie({method:le(["MailPoet","AmazonSES","SendGrid","PHPMail","SMTP"],"PHPMail"),frequency:ie({emails:ae("25"),interval:ae("5")}),mailpoet_api_key:t,host:t,port:t,region:ae("us-east-1"),access_key:t,secret_key:t,api_key:t,login:t,password:t,encryption:t,authentication:le(["1","-1"],"1"),mailpoet_api_key_state:ie({state:le(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:se})}),mailpoet_smtp_provider:o,smtp_provider:o,web_host:ae("manual"),mailpoet_sending_frequency:le(["auto","manual"],"manual"),signup_confirmation:ie({enabled:l,subject:t,body:t}),woocommerce:ie({use_mailpoet_editor:r,transactional_email_id:t,optin_on_checkout:ie({enabled:l,segments:i,message:t}),accept_cookie_revenue_tracking:ie({enabled:r,set:l})}),mailpoet_subscribe_old_woocommerce_customers:ie({enabled:l}),premium:ie({premium_key:t,premium_key_state:ie({state:le(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:se})}),authorized_emails_addresses_check:se})(e)}function ce(e){let t;return(n=e,a)=>{switch(a.type){case"SET_SETTING":return(0,L.setWith)((0,L.clone)(n),["data",...a.path],a.value,L.clone);case"SET_SETTINGS":return{...n,data:oe(a.value)};case"SET_ERROR_FLAG":return{...n,flags:{...n.flags,error:!!a.value}};case"SAVE_STARTED":return{...n,save:{inProgress:!0,error:null}};case"SAVE_DONE":return{...n,save:{inProgress:!1,error:null}};case"SAVE_FAILED":return{...n,save:{inProgress:!1,error:a.error}};case"UPDATE_KEY_ACTIVATION_STATE":return t={...n.keyActivation,...a.fields},t.isKeyValid=null,null!==t.mssStatus&&null!==t.premiumStatus&&(t.isKeyValid=t.mssStatus!==E.INVALID||t.premiumStatus!==d.INVALID),{...n,keyActivation:t};case"START_TEST_EMAIL_SENDING":return{...n,testEmail:{state:g.SENDING,error:null}};case"TEST_EMAIL_SUCCESS":return{...n,testEmail:{state:g.SUCCESS,error:null}};case"TEST_EMAIL_FAILED":return{...n,testEmail:{state:g.FAILURE,error:a.error}};default:return n}}}function me(e){const t=e.mailpoet_pages,n=e.mailpoet_paths,a=e.mailpoet_segments,r=e.mailpoet_hosts,l=oe(e.mailpoet_settings),i={error:!1,newUser:!!e.mailpoet_is_new_user,woocommerce:!!e.mailpoet_woocommerce_active,membersPlugin:!!e.mailpoet_members_plugin_active,builtInCaptcha:e.mailpoet_built_in_captcha_supported};let s=null,o=null,c=null;return(l.premium.premium_key||l.mta.mailpoet_api_key)&&(o=function(e,t){return e?"MailPoet"===t.mta.method?E.VALID_MSS_ACTIVE:E.VALID_MSS_NOT_ACTIVE:E.INVALID}(e.mailpoet_mss_key_valid,l),c=function(e,t){const n=!!p.Z.premiumVersion;return e?n?d.VALID_PREMIUM_PLUGIN_ACTIVE:t?d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:d.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:d.INVALID}(e.mailpoet_premium_key_valid,e.mailpoet_premium_plugin_installed),s=o!==E.INVALID||c!==d.INVALID),{data:l,flags:i,save:{inProgress:!1,error:null},keyActivation:{isKeyValid:s,mssStatus:o,premiumStatus:c,mssMessage:null,premiumMessage:null,fromAddressModalCanBeShown:!1,premiumInstallationStatus:null,key:l.premium.premium_key||l.mta.mailpoet_api_key,inProgress:!1,congratulatoryMssEmailSentTo:null,downloadUrl:e.mailpoet_premium_plugin_download_url},segments:a,pages:t,paths:n,hosts:r,testEmail:{state:g.NONE,error:null}}}const ue="mailpoet-settings";var pe=n(93726),de=n(5830),Ee=n(48228),_e=n(53681),ge=n(99181),be=({title:e,description:t,htmlFor:n})=>s().createElement("div",{className:"mailpoet-settings-label"},s().createElement("label",{className:"mailpoet-settings-label-title",htmlFor:n},e),t&&s().createElement("p",{className:"description"},t)),he=({children:e})=>s().createElement("div",{className:"mailpoet-settings-inputs"},e),ve=n(57744),fe=n(41882);function ye(e){return(0,fe.Z)(ue)[e]}var ke=n(94878);function Se(e,t=[]){return(0,ke.Z)((t=>{const n=t(ue);return n[e].bind(n)}),t)}function Ie(...e){const t=Se("getSetting"),n=ye("setSetting");return[t(e),s().useCallback((t=>n(e,t)),e)]}var Ne=()=>{const[e,t]=s().useState(!1),n=Se("isSaving")(),a=Se("hasErrorFlag")(),r=Se("getSavingError")(),l=ye("saveSettings"),{notices:i}=s().useContext(m.k),o=i.error,c=i.success;return s().useEffect((()=>{e&&!n&&(r?o(r.map((e=>s().createElement("p",null,e))),{scroll:!0}):c(s().createElement("p",null,p.Z.I18n.t("settingsSaved")),{scroll:!0}))}),[e,r,n,o,c]),s().createElement("div",{className:"mailpoet-settings-save"},s().createElement(ve.Z,{type:"button",automationId:"settings-submit-button",isDisabled:n||a,onClick:()=>{t(!0),l()}},p.Z.I18n.t("saveSettings")))},Ae=n(21200),Te=e=>{const t=Se(e.segmentsSelector?e.segmentsSelector:"getDefaultSegments")().map((e=>({value:e.id,label:e.name,count:e.subscribers}))),n=t.filter((t=>e.value.includes(t.value)));return s().createElement(Ae.Z,{isMulti:!0,defaultValue:n,id:e.id,placeholder:e.placeholder,options:t,onChange:t=>{e.setValue((t||[]).map((e=>e.value)))}})},Ce=n(2141),we=e=>{const t=Se("getPages")();let n=t.find((t=>t.id===parseInt(e.value,10)));return n||(n=t[0]),s().createElement("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered"},s().createElement(Ce.Z,{id:e.id,automationId:e.automationId,value:n.id,onChange:(0,C.z2)(e.setValue),isMinWidth:!0,dimension:"small"},t.map((e=>s().createElement("option",{key:e.id,value:e.id},`${e.title}`)))),s().createElement("span",{className:"mailpoet-gap"}),s().createElement("a",{className:"mailpoet-link",target:"_blank",title:(0,C.t)("previewPage"),rel:"noopener noreferrer",href:n.url[e.preview],"data-automation-id":e.linkAutomationId},(0,C.t)("preview")))},Me=n(60017),Le=n(43246);function Fe(){const e=Se("isMssActive")(),[t,n]=Ie("sender","name"),[a,r]=Ie("sender","address"),[l,i]=Ie("reply_to","name"),[o,c]=Ie("reply_to","address"),m=ye("setErrorFlag"),u=a&&!(0,C.Jh)(a),p=o&&!(0,C.Jh)(o);return s().useEffect((()=>{m(u||p)}),[p,u,m]),s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("defaultSenderTitle"),description:(0,C.t)("defaultSenderDescription"),htmlFor:"sender-name"}),s().createElement(he,null,s().createElement("label",{htmlFor:"sender-name"},(0,C.t)("from")),s().createElement("br",null),s().createElement(Me.Z,{dimension:"small",type:"text",id:"sender-name",placeholder:(0,C.t)("yourName"),"data-automation-id":"from-name-field",value:t,onChange:(0,C.z2)(n)}),s().createElement("br",null),s().createElement(Me.Z,{dimension:"small",type:"text",placeholder:"from@mydomain.com","data-automation-id":"from-email-field",value:a,onChange:(0,C.z2)((0,C.pz)(r))}),s().createElement("br",null),u&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("invalidEmail")),s().createElement("div",{className:"regular-text"},s().createElement(Le.Z,{emailAddress:a,mssActive:e})),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:"reply_to-name"},"Reply-to"),s().createElement(Me.Z,{dimension:"small",type:"text",id:"reply_to-name",placeholder:(0,C.t)("yourName"),"data-automation-id":"reply_to-name-field",value:l,onChange:(0,C.z2)(i)}),s().createElement("br",null),s().createElement(Me.Z,{dimension:"small",type:"text",placeholder:"reply_to@mydomain.com","data-automation-id":"reply_to-email-field",value:o,onChange:(0,C.z2)((0,C.pz)(c))}),s().createElement("br",null),p&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("invalidEmail"))))}var Pe=n(45697),Ze=n.n(Pe),De=n(89828);function Ve({title:e,description:t,event:n}){const[a,r]=Ie("subscribe",n,"enabled"),[l,i]=Ie("subscribe",n,"label"),[o,c]=Ie("subscribe",n,"segments");return s().useEffect((()=>{""===l&&i((0,C.t)("yesAddMe"))}),[l,i]),s().createElement(s().Fragment,null,s().createElement(be,{title:e,description:t,htmlFor:`subscribe-${n}-enabled`}),s().createElement(he,null,s().createElement(De.Z,{id:`subscribe-${n}-enabled`,automationId:`subscribe-${n}-checkbox`,checked:"1"===a,onCheck:e=>r(e?"1":"0")}),"1"===a&&s().createElement(s().Fragment,null,s().createElement("br",null),s().createElement(Me.Z,{dimension:"small",type:"text",value:l,onChange:(0,C.z2)(i)}),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:`subscribe-${n}-segments`},(0,C.t)("usersWillBeSubscribedTo")),s().createElement("div",{"data-automation-id":`subscribe-${n}-segments-selection`},s().createElement(Te,{id:`subscribe-${n}-segments`,placeholder:(0,C.t)("chooseList"),value:o,setValue:c})))))}Ve.propTypes={title:Ze().string.isRequired,description:Ze().string.isRequired,event:Ze().oneOf(["on_comment","on_register"]).isRequired};var Re=n(27927),ze=n.n(Re);function Oe(){const[e,t]=Ie("subscription","pages","manage"),[n,a]=Ie("subscription","segments");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("manageSubTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("manageSubDescription1")," ",ze()((0,C.t)("manageSubDescription2"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/222-customize-your-manage-subscription-page",rel:"noopener noreferrer","data-beacon-article":"59ddd0bb2c7d3a40f0ed5b57",target:"_blank"},e)))),htmlFor:"subscription-manage-page"}),s().createElement(he,null,s().createElement(we,{value:e,preview:"manage",setValue:t,id:"subscription-manage-page",automationId:"subscription-manage-page-selection",linkAutomationId:"preview_manage_subscription_page_link"}),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:"subscription-segments"},(0,C.t)("subscribersCanChooseFrom")),s().createElement(Te,{id:"subscription-segments",value:n,setValue:a,placeholder:(0,C.t)("leaveEmptyToDisplayAll")})))}function Ue(){const[e,t]=Ie("subscription","pages","unsubscribe"),[n,a]=Ie("subscription","pages","confirm_unsubscribe");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("unsubscribeTitle"),description:s().createElement(s().Fragment,null,ze()((0,C.t)("unsubscribeDescription1"),"[mailpoet_page]",(()=>s().createElement("code",{key:"mp"},"[mailpoet_page]")))," ",ze()((0,C.t)("unsubscribeDescription2"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/221-customize-your-unsubscribe-page",rel:"noopener noreferrer","data-beacon-article":"59dcea10042863379ddc8b4d",target:"_blank"},e)))),htmlFor:"subscription-pages-unsubscribe"}),s().createElement(he,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.t)("confirmationPageTitle"),":"),s().createElement(we,{value:n,preview:"confirm_unsubscribe",setValue:a,id:"subscription-pages-unsubscribe-confirmation",automationId:"unsubscribe-confirmation-page-selection",linkAutomationId:"unsubscribe_page_preview_link_confirmation"}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.t)("successPageTitle"),":"),s().createElement(we,{value:e,preview:"unsubscribe",setValue:t,id:"subscription-pages-unsubscribe",automationId:"unsubscribe-success-page-selection",linkAutomationId:"unsubscribe_page_preview_link"})))}function Ge(){const[e,t]=Ie("stats_notifications","enabled"),[n,a]=Ie("stats_notifications","automated"),[r,l]=Ie("stats_notifications","address"),i=ye("setErrorFlag"),o=("1"===e||"1"===n)&&""===r.trim(),c=r&&!(0,C.Jh)(r);return s().useEffect((()=>{i(o||c)}),[o,c,i]),s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("statsNotifsTitle"),description:(0,C.t)("statsNotifsDescription"),htmlFor:"stats-enabled"}),s().createElement(he,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(De.Z,{id:"stats-enabled",checked:"1"===e,onCheck:e=>t(e?"1":"0")}),s().createElement("label",{htmlFor:"stats-enabled"},(0,C.t)("newslettersAndPostNotifs"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(De.Z,{id:"stats-automated",checked:"1"===n,onCheck:e=>a(e?"1":"0")}),s().createElement("label",{htmlFor:"stats-automated"},(0,C.t)("welcomeAndWcEmails"))),s().createElement(Me.Z,{dimension:"small",type:"email",value:r,onChange:(0,C.z2)((0,C.pz)(l)),placeholder:"me@mydomain.com"}),o&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("pleaseFillEmail")),c&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("invalidEmail"))))}var Ke=n(84868);function xe(){const[e,t]=Ie("subscriber_email_notification","enabled"),[n,a]=Ie("subscriber_email_notification","address"),r=ye("setErrorFlag"),l="1"===e&&""===n.trim(),i=n&&!(0,C.Jh)(n);return s().useEffect((()=>{r(l||i)}),[l,i,r]),s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("newSubscriberNotifsTitle"),description:(0,C.t)("newSubscriberNotifsDescription"),htmlFor:"subscriber_email_notification-enabled"}),s().createElement(he,null,s().createElement(Ke.Z,{checked:"1"===e,value:"1",onCheck:t}),(0,C.t)("yes")," ",s().createElement(Ke.Z,{checked:""===e,value:"",onCheck:t}),(0,C.t)("no"),s().createElement("br",null),s().createElement(Me.Z,{dimension:"small",type:"email",value:n,onChange:(0,C.z2)((0,C.pz)(a)),placeholder:"me@mydomain.com"}),l&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("pleaseFillEmail")),i&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("invalidEmail"))))}function qe({name:e,title:t,description:n}){const[a,r]=s().useState([]),l=`[${e}${a.length?` segments="${a.join(",")}"`:""}]`;return s().createElement(s().Fragment,null,s().createElement(be,{title:t,description:n,htmlFor:`${e}-shortcode`}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",readOnly:!0,type:"text",value:l,onClick:e=>{e.target.focus(),e.target.select()},id:`${e}-shortcode`}),s().createElement("br",null),s().createElement(Te,{value:a,setValue:r,id:`${e}-shortcode-segments`,placeholder:(0,C.t)("leaveEmptyToDisplayAll"),segmentsSelector:"getSegments"})))}function Be(){return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("gdprTitle"),description:(0,C.t)("gdprDescription"),htmlFor:"gdpr-compliant"}),s().createElement(he,null,s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/246-guide-to-conform-to-gdpr","data-beacon-article":"5a9e8cdd04286374f7089a8c",title:(0,C.t)("readGuide"),target:"_blank",rel:"noopener noreferrer"},(0,C.t)("readGuide"))))}function We(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Fe,null),s().createElement(Ve,{event:"on_comment",title:(0,C.t)("subscribeInCommentsTitle"),description:(0,C.t)("subscribeInCommentsDescription")}),s().createElement(Ve,{event:"on_register",title:(0,C.t)("subscribeInRegistrationTitle"),description:(0,C.t)("subscribeInRegistrationDescription")}),s().createElement(Oe,null),s().createElement(Ue,null),s().createElement(Ge,null),s().createElement(xe,null),s().createElement(qe,{name:"mailpoet_archive",title:(0,C.t)("archiveShortcodeTitle"),description:(0,C.t)("archiveShortcodeDescription")}),s().createElement(qe,{name:"mailpoet_subscribers_count",title:(0,C.t)("subscribersCountShortcodeTitle"),description:(0,C.t)("subscribersCountShortcodeDescription")}),s().createElement(Be,null),s().createElement(Ne,null))}function $e(){const[e,t]=Ie("cron_trigger","method"),n=Se("getPaths")();return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("taskCron"),description:s().createElement(s().Fragment,null,(0,C.t)("taskCronDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/129-what-is-the-newsletter-task-scheduler","data-beacon-article":"57ce0a7a903360649f6e5703",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("readMore"))),htmlFor:"cron_trigger-method"}),s().createElement(he,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"cron_trigger-method-wordpress",value:"WordPress",checked:"WordPress"===e,onCheck:t,automationId:"wordress_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-wordpress"},(0,C.t)("websiteVisitors"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"cron_trigger-method-mailpoet",value:"MailPoet",checked:"MailPoet"===e,onCheck:t,automationId:"mailpoet_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-mailpoet"},ze()((0,C.t)("mailpoetScript"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/131-hosts-which-mailpoet-task-scheduler-wont-work","data-beacon-article":"57ce0b05c6979108399a0456",rel:"noopener noreferrer",target:"_blank"},e))))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"cron_trigger-method-cron",value:"Linux Cron",checked:"Linux Cron"===e,onCheck:t,automationId:"linux_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-cron"},(0,C.t)("serverCron"))),"Linux Cron"===e&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.t)("addCommandToCrontab")),s().createElement(Me.Z,{dimension:"small",type:"text",readOnly:!0,value:`php ${n.plugin}/mailpoet-cron.php ${n.root}`}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.t)("withFrequency")),s().createElement(Me.Z,{dimension:"small",type:"text",readOnly:!0,value:"*/1 * * * *"}))))}function He(){const e=Se("hasMembersPlugin")();return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("rolesTitle"),description:(0,C.t)("rolesDescription"),htmlFor:""}),s().createElement(he,null,s().createElement("p",null,e?s().createElement("a",{className:"mailpoet-link",href:"?page=roles"},(0,C.t)("manageUsingMembers")):ze()((0,C.t)("installMembers"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://wordpress.org/plugins/members/",rel:"noopener noreferrer",target:"_blank"},e))))))}function je(){const[e,t]=Ie("tracking","enabled");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("trackingTitle"),description:(0,C.t)("trackingDescription"),htmlFor:""}),s().createElement(he,null,s().createElement(Ke.Z,{id:"tracking-enabled",value:"1",checked:"1"===e,onCheck:t,automationId:"tracking-enabled-radio"}),s().createElement("label",{htmlFor:"tracking-enabled"},(0,C.t)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(Ke.Z,{id:"tracking-disabled",value:"",checked:""===e,onCheck:t,automationId:"tracking-disabled-radio"}),s().createElement("label",{htmlFor:"tracking-disabled"},(0,C.t)("no"))))}function Je(){const[e]=Ie("smtp_provider"),t=Se("isMssActive")(),[n,a]=Ie("send_transactional_emails");let r;return t?r="MailPoet Sending Service":"manual"===e?r="SMTP":"SendGrid"===e?r="SendGrid":"AmazonSES"===e?r="Amazon SES":"server"===e&&(r=(0,C.t)("hostOption")),s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("transactionalTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("transactionalDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails","data-beacon-article":"5ddbf92504286364bc9228c5",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("transactionalLink"))),htmlFor:""}),s().createElement(he,null,s().createElement(Ke.Z,{id:"transactional-enabled",value:"1",checked:"1"===n,onCheck:a}),s().createElement("label",{htmlFor:"transactional-enabled"},(0,C.t)("transactionalCurrentMethod").replace("%1$s",r),s().createElement("br",null),s().createElement("span",{className:"mailpoet-note"},ze()((0,C.t)("transactionalMssNote"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails#attachments",rel:"noopener noreferrer","data-beacon-article":"5ddbf92504286364bc9228c5",target:"_blank"},e))))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"transactional-disabled",value:"",checked:""===n,onCheck:a}),s().createElement("label",{htmlFor:"transactional-disabled"},(0,C.t)("transactionalWP")))))}function Ye(){const[e,t]=Ie("deactivate_subscriber_after_inactive_days"),[n]=Ie("tracking","enabled");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("inactiveSubsTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("inactiveSubsDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/264-inactive-subscribers","data-beacon-article":"5cbf19622c7d3a026fd3efe1",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("readMore"))),htmlFor:""}),s().createElement(he,null,!n&&s().createElement("p",{"data-automation-id":"inactive-subscribers-disabled"},(0,C.t)("disabledBecauseTrackingIs")),n&&s().createElement("div",{"data-automation-id":"inactive-subscribers-enabled"},s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"inactive-subscribers-disabled",automationId:"inactive-subscribers-option-never",value:"",checked:""===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-disabled"},(0,C.t)("never"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"inactive-subscribers-3-months",value:"90",checked:"90"===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-3-months"},(0,C.t)("after3months"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"inactive-subscribers-6-months",value:"180",checked:"180"===e,onCheck:t,automationId:"inactive-subscribers-default"}),s().createElement("label",{htmlFor:"inactive-subscribers-6-months"},(0,C.t)("after6months"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"inactive-subscribers-12-months",value:"365",checked:"365"===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-12-months"},(0,C.t)("after12months"))))))}function Xe(){const[e,t]=Ie("analytics","enabled"),[,n]=Ie("3rd_party_libs","enabled");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("shareDataTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("shareDataDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/130-sharing-your-data-with-us","data-beacon-article":"57ce0aaac6979108399a0454",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("readMore"))),htmlFor:""}),s().createElement(he,null,s().createElement(Ke.Z,{id:"share-data-enabled",value:"1",checked:"1"===e,onCheck:()=>{t("1"),n("1")},automationId:"analytics-yes"}),s().createElement("label",{htmlFor:"share-data-enabled"},(0,C.t)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(Ke.Z,{id:"share-data-disabled",value:"",checked:""===e,onCheck:t,automationId:"analytics-no"}),s().createElement("label",{htmlFor:"share-data-disabled"},(0,C.t)("no"))))}qe.propTypes={name:Ze().oneOf(["mailpoet_archive","mailpoet_subscribers_count"]).isRequired,title:Ze().string.isRequired,description:Ze().string.isRequired};const Qe=()=>{const[e,t]=Ie("3rd_party_libs","enabled"),[,n]=Ie("analytics","enabled");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("libs3rdPartyTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("libs3rdPartyDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/338-what-3rd-party-libraries-we-use","data-beacon-article":"5f7c7dd94cedfd0017dcece8",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("readMore"))),htmlFor:""}),s().createElement(he,null,s().createElement(Ke.Z,{id:"libs-3rd-party-enabled",value:"1",checked:"1"===e,onCheck:t}),s().createElement("label",{htmlFor:"libs-3rd-party-enabled"},(0,C.t)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(Ke.Z,{id:"libs-3rd-party-disabled",value:"",checked:""===e,onCheck:()=>{t(""),n("")}}),s().createElement("label",{htmlFor:"libs-3rd-party-disabled"},(0,C.t)("no"))))};function et(){const[e,t]=Ie("captcha","type"),[n,a]=Ie("captcha","recaptcha_site_token"),[r,l]=Ie("captcha","recaptcha_secret_token"),i=Se("isBuiltInCaptchaSupported")(),o=ye("setErrorFlag"),c="recaptcha"===e&&""===n.trim(),m="recaptcha"===e&&""===r.trim();return s().useEffect((()=>{o(c||m)}),[m,c,o]),s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("captchaTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("captchaDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://www.google.com/recaptcha/admin",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("signupForCaptchaKey"))),htmlFor:""}),s().createElement(he,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"built-in-captcha",disabled:!i,value:"built-in",checked:"built-in"===e,onCheck:t}),s().createElement("label",{htmlFor:"built-in-captcha"},(0,C.t)("builtInCaptcha")," ",!i&&(0,C.t)("disbaledBecauseExtensionMissing"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"google-captcha",value:"recaptcha",checked:"recaptcha"===e,onCheck:t}),s().createElement("label",{htmlFor:"google-captcha"},(0,C.t)("googleReCaptcha"))),"recaptcha"===e&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Me.Z,{dimension:"small",type:"text",value:n,onChange:(0,C.z2)(a),placeholder:(0,C.t)("yourReCaptchaKey")}),c&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("fillReCaptchaKeys")),s().createElement("br",null),s().createElement(Me.Z,{dimension:"small",type:"text",value:r,onChange:(0,C.z2)(l),placeholder:(0,C.t)("yourReCaptchaSecret")}),m&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("fillReCaptchaKeys"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ke.Z,{id:"no-captcha",value:"",checked:""===e,onCheck:t}),s().createElement("label",{htmlFor:"no-captcha"},(0,C.t)("disable")))))}function tt(){const e=ye("reinstall"),{notices:t}=s().useContext(m.k);return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("reinstallTitle"),description:(0,C.t)("reinstallDescription"),htmlFor:""}),s().createElement(he,null,s().createElement(ve.Z,{type:"button",onClick:async()=>{if(window.confirm((0,C.t)("reinstallConfirmation"))){const n=await e();"SAVE_FAILED"===n.type?t.error(n.error.map((e=>s().createElement("p",null,e))),{scroll:!0}):window.location.href="admin.php?page=mailpoet-newsletters"}},automationId:"reinstall-button",variant:"destructive"},(0,C.t)("reinstallNow"))))}function nt(){const e=ye("recalculateSubscribersScore"),{notices:t}=s().useContext(m.k);return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("recalculateSubscribersScoreTitle"),description:(0,C.t)("recalculateSubscribersScoreDescription"),htmlFor:""}),s().createElement(he,null,s().createElement(ve.Z,{type:"button",onClick:async()=>{await e(),t.info(s().createElement("p",null,(0,C.t)("recalculateSubscribersScoreNotice")),{scroll:!0})},variant:"secondary",dimension:"small"},(0,C.t)("recalculateSubscribersScoreNow"))))}function at(){const[e,t]=Ie("logging");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("loggingTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("loggingDescription")," ",s().createElement("a",{href:"?page=mailpoet-logs",className:"mailpoet-link"},(0,C.t)("loggingDescriptionLink"))),htmlFor:"logging-level"}),s().createElement(he,null,s().createElement(Ce.Z,{id:"logging-level",value:e,onChange:(0,C.z2)(t),automationId:"logging-select-box",isMinWidth:!0,dimension:"small"},s().createElement("option",{value:"everything","data-automation-id":"log-everything"},(0,C.t)("everythingLogOption")),s().createElement("option",{value:"errors","data-automation-id":"log-errors"},(0,C.t)("errorsLogOption")),s().createElement("option",{value:"nothing","data-automation-id":"log-nothing"},(0,C.t)("nothingLogOption")))))}function rt(){const[e,t]=Ie("bounce","address");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("bounceEmail"),description:s().createElement(s().Fragment,null,(0,C.t)("yourBouncedEmails")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/180-how-bounce-management-works-in-mailpoet-3","data-beacon-article":"58a5a7502c7d3a576d353c78",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("readMore"))),htmlFor:"bounce-address"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",id:"bounce-address",placeholder:"bounce@mydomain.com","data-automation-id":"bounce-address-field",value:e,onChange:(0,C.z2)((0,C.pz)(t))})))}function lt(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(rt,null),s().createElement($e,null),s().createElement(He,null),s().createElement(je,null),s().createElement(Je,null),s().createElement(nt,null),s().createElement(Ye,null),s().createElement(Xe,null),s().createElement(Qe,null),s().createElement(et,null),s().createElement(tt,null),s().createElement(at,null),s().createElement(Ne,null))}var it=n(13651);const st=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success_item mailpoet_success"},p.Z.I18n.t("premiumTabKeyValidMessage")),ot=()=>s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},p.Z.I18n.t("premiumTabKeyNotValidMessage"));function ct(){const{isKeyValid:e}=Se("getKeyActivationState")();return e?s().createElement(st,null):s().createElement(ot,null)}const mt=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success mailpoet_mss_key_valid"},p.Z.I18n.t("premiumTabMssActiveMessage")),ut=({message:e})=>s().createElement("div",{className:"mailpoet_error"},e||p.Z.I18n.t("premiumTabMssKeyNotValidMessage"));ut.propTypes={message:Ze().string},ut.defaultProps={message:""};const pt=({activationCallback:e})=>s().createElement("div",{className:"mailpoet_error"},p.Z.I18n.t("premiumTabMssNotActiveMessage")," ",s().createElement("button",{type:"button",className:"mailpoet-button button button-primary button-small",onClick:e},p.Z.I18n.t("premiumTabMssActivateMessage")));function dt(e){const{mssStatus:t}=Se("getKeyActivationState")();switch(t){case E.VALID_MSS_ACTIVE:return s().createElement(mt,null);case E.VALID_MSS_NOT_ACTIVE:return s().createElement(pt,{activationCallback:e.activationCallback});case E.INVALID:return s().createElement(ut,{message:e.keyMessage});default:return null}}pt.propTypes={activationCallback:Ze().func.isRequired},dt.propTypes={keyMessage:Ze().string,activationCallback:Ze().func.isRequired},dt.defaultProps={keyMessage:""};const Et=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success"},p.Z.I18n.t("premiumTabPremiumActiveMessage")),_t=e=>s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet_error mailpoet_install_premium_message"},p.Z.I18n.t("premiumTabPremiumNotInstalledMessage")),e.url&&s().createElement(ve.Z,{href:e.url},p.Z.I18n.t("premiumTabPremiumDownloadMessage")));_t.propTypes={url:Ze().string};const gt=({message:e})=>s().createElement("div",{className:"mailpoet_error"},e||p.Z.I18n.t("premiumTabPremiumKeyNotValidMessage"));function bt(e){const{premiumStatus:t,downloadUrl:n}=Se("getKeyActivationState")();switch(t){case d.VALID_PREMIUM_PLUGIN_ACTIVE:return s().createElement(s().Fragment,null,s().createElement(Et,null));case d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:return s().createElement(s().Fragment,null,s().createElement(_t,{url:n}));case d.INVALID:return s().createElement(s().Fragment,null,s().createElement(gt,{message:e.keyMessage}));default:return null}}function ht(){return s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},p.Z.I18n.t("premiumTabKeyCannotValidate"),s().createElement("ul",{className:"disc-inside-list"},s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateLocalhost")),s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateBlockingHost")),s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateIntranet"))),s().createElement("p",null,s().createElement("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error"},p.Z.I18n.t("learnMore")))))}function vt(){const{notices:e}=(0,i.useContext)(m.k),t=Se("getKeyActivationState")(),n=ye("updateKeyActivationState"),a=ye("verifyMssKey"),r=ye("verifyPremiumKey"),l=ye("sendCongratulatoryMssEmail"),[o,c]=Ie("sender","address"),[u,d]=Ie("authorized_emails_addresses_check"),[_]=Ie("mta","mailpoet_api_key_state","data"),g=t.fromAddressModalCanBeShown&&t.mssStatus===E.VALID_MSS_ACTIVE&&(!o||u),b=!1===t.inProgress&&t.mssStatus===E.VALID_MSS_ACTIVE&&_&&!1===_.is_approved;return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(be,{htmlFor:"mailpoet_premium_key",title:(0,C.t)("premiumTabActivationKeyLabel"),description:(0,C.t)("premiumTabDescription")}),s().createElement(he,null,s().createElement(Me.Z,{type:"text",id:"mailpoet_premium_key",name:"premium[premium_key]",value:t.key||"",onChange:e=>n({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null,key:e.target.value.trim()||null})}),s().createElement(ve.Z,{type:"button",onClick:async()=>{t.key?(await n({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null}),p.Z.Modal.loading(!0),n({inProgress:!0}),await a(t.key),await l(),await r(t.key),n({inProgress:!1}),p.Z.Modal.loading(!1),n({fromAddressModalCanBeShown:!0})):e.error(s().createElement("p",null,(0,C.t)("premiumTabNoKeyNotice")),{scroll:!0})}},(0,C.t)("premiumTabVerifyButton")),null!==t.isKeyValid&&(503===t.code?s().createElement("div",{className:"key-activation-messages"},s().createElement(ht,null)):s().createElement("div",{className:"key-activation-messages"},s().createElement(ct,null),null!==t.mssStatus&&s().createElement(dt,{keyMessage:t.mssMessage,activationCallback:async()=>{await a(t.key),l(),n({fromAddressModalCanBeShown:!0})}}),t.congratulatoryMssEmailSentTo&&s().createElement("div",{className:"mailpoet_success_item mailpoet_success"},(0,C.t)("premiumTabCongratulatoryMssEmailSent").replace("[email_address]",t.congratulatoryMssEmailSentTo)),null!==t.premiumStatus&&s().createElement(bt,{keyMessage:t.premiumMessage}),b&&s().createElement("div",{className:"mailpoet_success"},s().createElement("div",{className:"pending_approval_heading"},(0,C.t)("premiumTabPendingApprovalHeading")),s().createElement("div",null,(0,C.t)("premiumTabPendingApprovalMessage"))),!t.isKeyValid&&s().createElement("p",null,s().createElement("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error"},p.Z.I18n.t("learnMore")))))),g&&s().createElement(it.Z,{onRequestClose:()=>{n({fromAddressModalCanBeShown:!1}),l()},setAuthorizedAddress:async e=>{await c(e),await d(null)}}))}gt.propTypes={message:Ze().string},gt.defaultProps={message:""},bt.propTypes={keyMessage:Ze().string},bt.defaultProps={keyMessage:""};var ft=n(5977),yt=n(73727);function kt(){const e=(0,ft.useHistory)(),t=Se("isMssActive")(),[n]=Ie("mta","mailpoet_api_key"),{mssStatus:a,premiumStatus:r}=Se("getKeyActivationState")(),l=null!==a&&a!==E.INVALID,i=null!==r&&r!==d.INVALID,o=window.mailpoet_free_plan_url,c=ye("setSetting"),m=ye("saveSettings");return s().createElement("ul",{className:"mailpoet-sending-methods"},s().createElement("li",null,s().createElement("label",{className:"mailpoet-sending-method mailpoet-form-checkbox"},s().createElement("input",{type:"radio",checked:t,onChange:async a=>{a.preventDefault(),t||l||e.push("/premium"),!t&&l&&await(async()=>(await c(["mta_group"],"mailpoet"),await c(["mta","method"],"MailPoet"),await c(["mta","mailpoet_api_key"],n),await c(["signup_confirmation","enabled"],"1"),m()))()}}),s().createElement("span",{className:"mailpoet-form-radio-control"}),s().createElement("h4",{className:"mailpoet-h4"},(0,C.t)("mssTitle")),s().createElement("p",null,t?(0,C.t)("youreSendingWithMss"):(0,C.t)("solveSendingProblems")),s().createElement("ul",{className:"mailpoet-sending-method-benefits mailpoet_success"},s().createElement("li",{className:"mailpoet_success_item"},(0,C.t)("mssBenefit1")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.t)("mssBenefit2")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.t)("mssBenefit3")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.t)("mssBenefit4")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.t)("mssBenefit5"))),!l&&!i&&s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement("a",{className:"mailpoet-button button-primary",href:o,rel:"noopener noreferrer",target:"_blank"},(0,C.t)("freeUpto")),s().createElement("span",null," ",(0,C.t)("or")," "),ze()((0,C.t)("enterYourKey"),/\[link\](.*?)\[\/link\]/g,((e,t)=>s().createElement(yt.rU,{key:t,to:"/premium",className:"mailpoet-link"},e)))),!l&&i&&s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement("i",null,(0,C.t)("invalidKeyForMss"))," ",s().createElement("a",{className:"mailpoet-button button-primary",href:"https://account.mailpoet.com/",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("getPlan"))))),s().createElement("li",null,s().createElement("label",{className:"mailpoet-sending-method mailpoet-form-checkbox"},s().createElement("input",{type:"radio",checked:!t,onChange:t=>{t.preventDefault(),e.push("/mta/other")}}),s().createElement("span",{className:"mailpoet-form-radio-control"}),s().createElement("h4",{className:"mailpoet-h4"},(0,C.t)("otherTitle")),s().createElement("p",null,(0,C.t)("sendViaHost")," ",s().createElement("strong",null,(0,C.t)("notRecommended"))," ",(0,C.t)("orViaThirdParty")),s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement(yt.rU,{to:"/mta/other",className:"mailpoet-link"},(0,C.t)("configure"))))))}function St(){const[e,t]=Ie("smtp_provider"),[,n]=Ie("mta_group"),[,a]=Ie("mta","method");return s().useEffect((()=>{switch(e){case"server":n("website"),a("PHPMail");break;case"manual":n("smtp"),a("SMTP");break;case"AmazonSES":n("smtp"),a("AmazonSES");break;case"SendGrid":n("smtp"),a("SendGrid");break;default:a("PHPMail")}}),[e,n,a]),s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("method"),htmlFor:"mailpoet_smtp_method"}),s().createElement(he,null,s().createElement(Ce.Z,{id:"mailpoet_smtp_method",value:e,onChange:(0,C.z2)(t),isMinWidth:!0,dimension:"small"},s().createElement("option",{value:"server"},(0,C.t)("hostOption")),s().createElement("option",{value:"manual"},(0,C.t)("smtpOption")),s().createElement("optgroup",{label:(0,C.t)("selectProvider")},s().createElement("option",{value:"AmazonSES"},"Amazon SES"),s().createElement("option",{value:"SendGrid"},"SendGrid")))))}function It(){return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("spfTitle"),description:(0,C.t)("spfDescription"),htmlFor:""}),s().createElement(he,null,(0,C.t)("spfSetup")))}var Nt=n(83213),At=n(38287);function Tt(){const[e,t]=s().useState(window.mailpoet_current_user_email),[n]=Ie("mta"),{state:a,error:r}=Se("getTestEmailState")(),l=ye("sendTestEmail");return s().createElement(s().Fragment,null,a===g.SENDING&&s().createElement(de.Z,null),a===g.SUCCESS&&s().createElement(At.Z,{type:"success",scroll:!0},s().createElement("p",null,(0,C.t)("emailSent"))),a===g.FAILURE&&s().createElement(At.Z,{type:"error",scroll:!0},s().createElement("p",null,r.map((e=>s().createElement("p",{key:e},e))))),s().createElement(be,{title:(0,C.t)("testSending"),htmlFor:"mailpoet_mta_test_email"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",id:"mailpoet_mta_test_email",value:e,onChange:(0,C.z2)(t)}),s().createElement(ve.Z,{type:"button",dimension:"small",variant:"secondary",onClick:()=>l(e,n)},(0,C.t)("sendTestEmail")),s().createElement(Nt.default,{tooltipId:"tooltip-settings-test",className:"mailpoet_tooltip_icon",tooltip:s().createElement("span",{style:{pointerEvents:"all"}},ze()((0,C.t)("testEmailTooltip"),/\[link\](.*?)\[\/link\]/g,((e,t)=>s().createElement("a",{className:"mailpoet-link",key:t,target:"_blank",rel:"noopener noreferrer","data-beacon-article":"580846f09033604df5166ed1",href:"https://kb.mailpoet.com/article/146-my-newsletters-are-not-being-received"},e))))})))}function Ct(){const e=ye("saveSettings"),t=ye("loadSettings"),n=(0,ft.useHistory)();return s().createElement("div",{className:"mailpoet-settings-save"},s().createElement(ve.Z,{type:"button",onClick:async()=>{await e(),n.push("/mta")}},(0,C.t)("activate")),s().createElement(ve.Z,{onClick:async()=>{p.Z.Modal.loading(!0),await t(),n.push("/mta"),p.Z.Modal.loading(!1)},variant:"tertiary"},(0,C.t)("orCancel")))}function wt({recommendedEmails:e,recommendedInterval:t}){const[n,a]=Ie("mailpoet_sending_frequency"),[r,l]=Ie("mta","frequency","emails"),[i,o]=Ie("mta","frequency","interval");s().useEffect((()=>{"auto"===n&&(l(`${e}`),o(`${t}`))}),[n,e,t,l,o]);const c=Math.floor(1440*parseInt(r,10)/parseInt(i,10)),m=Math.floor(c/86400*10)/10;return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("sendingFrequency"),htmlFor:"mailpoet_sending_frequency"}),s().createElement(he,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ce.Z,{id:"mailpoet_sending_frequency",value:n,onChange:(0,C.z2)(a),dimension:"small"},s().createElement("option",{value:"auto"},(0,C.t)("recommendedTitle")),s().createElement("option",{value:"manual"},(0,C.t)("ownFrequency")))),"manual"===n&&s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered"},s().createElement(Me.Z,{dimension:"small",id:"other_frequency_emails",type:"number",min:"1",max:"1000",value:r,onChange:(0,C.z2)(l)}),s().createElement("span",{className:"mailpoet-gap"}),s().createElement("span",null,(0,C.t)("emails"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ce.Z,{id:"other_frequency_interval",value:i,onChange:(0,C.z2)(o),dimension:"small"},s().createElement("option",{value:"1"},"every minute"),s().createElement("option",{value:"2"},"every 2 minutes"),s().createElement("option",{value:"5"},"every 5 minutes (recommended)"),s().createElement("option",{value:"10"},"every 10 minutes"),s().createElement("option",{value:"15"},"every 15 minutes"),s().createElement("option",{value:"30"},"every 30 minutes")))),"auto"===n&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.t)("xEmails").replace("%1$s",r)," ",function(e){const t=Math.floor(parseInt(e,10));return t>60?(0,C.t)("everyHours").replace("%1$d",""+t/60):60===t?(0,C.t)("everyHour"):t>1?(0,C.t)("everyMinutes").replace("%1$d",`${t}`):(0,C.t)("everyMinute")}(i),". "),s().createElement("div",{className:"mailpoet-settings-inputs-row"},ze()((0,C.t)("thatsXEmailsPerDay").replace("%1$s",c.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e)))),m>1&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement("span",{className:"mailpoet_emails_per_second_warning"},ze()((0,C.t)("thatsXEmailsPerSecond").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e))))),"manual"===n&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},ze()((0,C.t)("frequencyWarning").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e))))))}function Mt(){const[e,t]=Ie("web_host"),n=Se("getWebHosts")(),a=n[e];return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("yourHost"),htmlFor:"mailpoet_web_host"}),s().createElement(he,null,s().createElement(Ce.Z,{id:"mailpoet_web_host",value:e,onChange:(0,C.z2)(t),isMinWidth:!0,dimension:"small"},Object.entries(n).map((([e,t])=>s().createElement("option",{key:e,value:e},t.name))))),s().createElement(wt,{recommendedEmails:a.emails,recommendedInterval:a.interval}))}function Lt(){const[e,t]=Ie("mta","host"),[n,a]=Ie("mta","port"),[r,l]=Ie("mta","login"),[i,o]=Ie("mta","password"),[c,m]=Ie("mta","encryption"),[u,p]=Ie("mta","authentication");return s().createElement(s().Fragment,null,s().createElement(wt,{recommendedEmails:100,recommendedInterval:5}),s().createElement(be,{title:(0,C.t)("smtpHost"),description:(0,C.t)("smtpHostExample"),htmlFor:"mailpoet_smtp_host"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_host",value:e,onChange:(0,C.z2)(t)})),s().createElement(be,{title:(0,C.t)("smtpPort"),htmlFor:"mailpoet_smtp_port"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_port",value:n,onChange:(0,C.z2)(a)})),s().createElement(be,{title:(0,C.t)("login"),htmlFor:"mailpoet_smtp_login"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_login",value:r,onChange:(0,C.z2)(l)})),s().createElement(be,{title:(0,C.t)("password"),htmlFor:"mailpoet_smtp_password"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"password",id:"mailpoet_smtp_password",value:i,onChange:(0,C.z2)(o)})),s().createElement(be,{title:(0,C.t)("secureConnectioon"),htmlFor:"mailpoet_smtp_encryption"}),s().createElement(he,null,s().createElement(Ce.Z,{id:"mailpoet_smtp_encryption",value:c,onChange:(0,C.z2)(m),isMinWidth:!0,dimension:"small"},s().createElement("option",{value:""},(0,C.t)("no")),s().createElement("option",{value:"ssl"},"SSL"),s().createElement("option",{value:"tls"},"TLS"))),s().createElement(be,{title:(0,C.t)("authentication"),description:(0,C.t)("authenticationDescription"),htmlFor:"mailpoet_smtp_authentication"}),s().createElement(he,null,s().createElement(Ke.Z,{value:"1",checked:"1"===u,onCheck:p}),(0,C.t)("yes")," ",s().createElement(Ke.Z,{value:"-1",checked:"-1"===u,onCheck:p}),(0,C.t)("no")))}function Ft(){const[e,t]=Ie("mta","region"),[n,a]=Ie("mta","access_key"),[r,l]=Ie("mta","secret_key"),i=Se("getAmazonSesOptions")();return s().createElement(s().Fragment,null,s().createElement(wt,{recommendedEmails:i.emails,recommendedInterval:i.interval}),s().createElement(be,{title:(0,C.t)("region"),htmlFor:"mailpoet_amazon_ses_region"}),s().createElement(he,null,s().createElement(Ce.Z,{id:"mailpoet_amazon_ses_region",value:e,onChange:(0,C.z2)(t),isMinWidth:!0,dimension:"small"},Object.entries(i.regions).map((([e,t])=>s().createElement("option",{key:t,value:t},e))))),s().createElement(be,{title:(0,C.t)("accessKey"),htmlFor:"mailpoet_amazon_ses_access_key"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",value:n,className:"regular-text",onChange:(0,C.z2)(a),id:"mailpoet_amazon_ses_access_key"})),s().createElement(be,{title:(0,C.t)("secretKey"),htmlFor:"mailpoet_amazon_ses_secret_key"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",value:r,className:"regular-text",onChange:(0,C.z2)(l),id:"mailpoet_amazon_ses_secret_key"})))}function Pt(){const[e,t]=Ie("mta","api_key"),n=Se("getSendGridOptions")();return s().createElement(s().Fragment,null,s().createElement(wt,{recommendedEmails:n.emails,recommendedInterval:n.interval}),s().createElement(be,{title:(0,C.t)("apiKey"),htmlFor:"mailpoet_sendgrid_api_key"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",value:e,onChange:(0,C.z2)(t),id:"mailpoet_sendgrid_api_key"})))}function Zt(){const[e]=Ie("mta","method");return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(St,null),"PHPMail"===e&&s().createElement(Mt,null),"SMTP"===e&&s().createElement(Lt,null),"AmazonSES"===e&&s().createElement(Ft,null),"SendGrid"===e&&s().createElement(Pt,null),s().createElement(It,null),s().createElement(Tt,null),s().createElement(Ct,null))}function Dt(){const{subPage:e}=(0,ft.useParams)();return"other"===e?s().createElement(Zt,null):s().createElement(kt,null)}function Vt(){const e=Se("isMssActive")(),[t,n]=Ie("signup_confirmation","enabled"),a=e=>{"1"===e&&window.confirm((0,C.t)("subscribersNeedToActivateSub"))&&n("1"),""===e&&window.confirm((0,C.t)("newSubscribersAutoConfirmed"))&&n("")};return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("enableSignupConfTitle"),description:s().createElement(s().Fragment,null,(0,C.t)("enableSignupConfDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/128-why-you-should-use-signup-confirmation-double-opt-in","data-beacon-article":"57ce097f903360649f6e5700",rel:"noopener noreferrer",target:"_blank"},(0,C.t)("readAboutDoubleOptIn"))),htmlFor:"signup_confirmation-enabled"}),s().createElement(he,null,e?s().createElement("p",null,(0,C.t)("signupConfirmationIsMandatory")):s().createElement(s().Fragment,null,s().createElement(Ke.Z,{id:"signup_confirmation-enabled",checked:"1"===t,value:"1",onCheck:a,automationId:"enable_signup_confirmation"}),(0,C.t)("yes")," ",s().createElement(Ke.Z,{checked:""===t,value:"",onCheck:a,automationId:"disable_signup_confirmation"}),(0,C.t)("no"))))}function Rt(){const[e]=Ie("signup_confirmation","enabled"),[t,n]=Ie("signup_confirmation","subject");return e?s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("emailSubject"),htmlFor:"signup_confirmation-subject"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",size:50,id:"signup_confirmation-subject","data-automation-id":"signup_confirmation_email_subject",value:t,onChange:(0,C.z2)(n)}))):null}wt.propTypes={recommendedEmails:Ze().number.isRequired,recommendedInterval:Ze().number.isRequired};var zt=n(97972);function Ot(){const[e]=Ie("signup_confirmation","enabled"),[t,n]=Ie("signup_confirmation","body");if(!e)return null;const a=(0,C.t)("emailContentDescription").split("<br />").filter((e=>e));return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("emailContent"),description:a.map((e=>s().createElement("span",{key:e},e,s().createElement("br",null),s().createElement("br",null)))),htmlFor:"signup_confirmation-body"}),s().createElement(he,null,s().createElement(zt.Z,{id:"signup_confirmation-body",cols:50,rows:15,"data-automation-id":"signup_confirmation_email_body",value:t,onChange:(0,C.z2)(n)})))}function Ut(){const[e]=Ie("signup_confirmation","enabled"),[t,n]=Ie("subscription","pages","confirmation");return e?s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("confirmationPage"),description:(0,C.t)("confirmationPageDescription"),htmlFor:"subscription-pages-confirmation"}),s().createElement(he,null,s().createElement(we,{value:t,preview:"confirm",setValue:n,id:"subscription-pages-confirmation",automationId:"page_selection",linkAutomationId:"preview_page_link"}))):null}function Gt(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Vt,null),s().createElement(Rt,null),s().createElement(Ot,null),s().createElement(Ut,null),s().createElement(Ne,null))}function Kt(){const[e,t]=Ie("woocommerce","use_mailpoet_editor"),[n]=Ie("woocommerce","transactional_email_id"),a=ye("openWoocommerceCustomizer");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("wcCustomizerTitle"),description:(0,C.t)("wcCustomizerDescription"),htmlFor:"mailpoet_wc_customizer"}),s().createElement(he,null,s().createElement(De.Z,{id:"mailpoet_wc_customizer",automationId:"mailpoet_wc_customizer",checked:"1"===e,onCheck:e=>t(e?"1":"")}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(ve.Z,{type:"button",onClick:()=>a(n),variant:"secondary",dimension:"small"},(0,C.t)("openTemplateEditor")))))}function xt(){const[e,t]=Ie("woocommerce","optin_on_checkout","enabled"),[n,a]=Ie("woocommerce","optin_on_checkout","segments"),[r,l]=Ie("woocommerce","optin_on_checkout","message"),i=ye("setErrorFlag"),o=""===r.trim();return s().useEffect((()=>{i(o)}),[o,i]),s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("wcOptinTitle"),description:(0,C.t)("wcOptinDescription"),htmlFor:"mailpoet_wc_checkout_optin"}),s().createElement(he,null,s().createElement(De.Z,{id:"mailpoet_wc_checkout_optin",automationId:"mailpoet_wc_checkout_optin",checked:"1"===e,onCheck:e=>t(e?"1":"")}),"1"===e&&s().createElement(s().Fragment,null,s().createElement("br",null),s().createElement("label",{htmlFor:"mailpoet_wc_checkout_optin_segments"},(0,C.t)("wcOptinSegmentsTitle"),s().createElement("br",null),s().createElement("span",null,(0,C.t)("leaveEmptyToSubscribeToWCCustomers"))),s().createElement("br",null),s().createElement(Te,{id:"mailpoet_wc_checkout_optin_segments",value:n,setValue:a,placeholder:(0,C.t)("wcOptinSegmentsPlaceholder")}))),"1"===e&&s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("wcOptinMsgTitle"),description:(0,C.t)("wcOptinMsgDescription"),htmlFor:"mailpoet_wc_checkout_optin_message"}),s().createElement(he,null,s().createElement(Me.Z,{dimension:"small",type:"text",id:"mailpoet_wc_checkout_optin_message","data-automation-id":"mailpoet_wc_checkout_optin_message",value:r,onChange:(0,C.z2)(l),placeholder:(0,C.t)("wcOptinMsgPlaceholder")}),s().createElement("br",null),o&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.t)("wcOptinMsgCannotBeEmpty")))))}function qt(){const[e,t]=Ie("mailpoet_subscribe_old_woocommerce_customers","enabled");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("subscribeOldWCTitle"),description:(0,C.t)("subscribeOldWCDescription"),htmlFor:"mailpoet_subscribe_old_wc_customers"}),s().createElement(he,null,s().createElement(De.Z,{id:"mailpoet_subscribe_old_wc_customers",automationId:"mailpoet_subscribe_old_wc_customers",checked:"1"===e,onCheck:e=>t(e?"1":"")})))}function Bt(){const[e,t]=Ie("woocommerce","accept_cookie_revenue_tracking","enabled");return s().createElement(s().Fragment,null,s().createElement(be,{title:(0,C.t)("enableCookiesTitle"),description:(0,C.t)("enableCookiesDescription"),htmlFor:"mailpoet_accept_cookie_revenue_tracking"}),s().createElement(he,null,s().createElement(De.Z,{id:"mailpoet_accept_cookie_revenue_tracking",automationId:"accept_cookie_revenue_tracking",checked:"1"===e,onCheck:e=>t(e?"1":"")})))}function Wt(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Kt,null),s().createElement(xt,null),s().createElement(qt,null),s().createElement(Bt,null),s().createElement(Ne,null))}function $t(){const e=Se("isSaving")(),t=Se("hasWooCommerce")();return s().createElement(s().Fragment,null,s().createElement(ge.D,null),e&&s().createElement(de.Z,null),s().createElement(pe.Z,null),s().createElement(Ee.Z,{activeKey:"basics",onSwitch:e=>(e=>{p.Z.trackEvent("User has clicked a tab in Settings",{"MailPoet Free version":p.Z.version,"Tab ID":e})})(e)},s().createElement(_e.Z,{key:"basics",title:(0,C.t)("basicsTab"),automationId:"basic_settings_tab"},s().createElement(We,null)),s().createElement(_e.Z,{key:"signup",title:(0,C.t)("signupConfirmationTab"),automationId:"signup_settings_tab"},s().createElement(Gt,null)),s().createElement(_e.Z,{key:"mta",route:"mta/:subPage?",title:(0,C.t)("sendWithTab"),automationId:"send_with_settings_tab"},s().createElement(Dt,null)),t&&s().createElement(_e.Z,{key:"woocommerce",title:(0,C.t)("wooCommerceTab"),automationId:"woocommerce_settings_tab"},s().createElement(Wt,null)),s().createElement(_e.Z,{key:"advanced",title:(0,C.t)("advancedTab"),automationId:"settings-advanced-tab"},s().createElement(lt,null)),s().createElement(_e.Z,{key:"premium",title:(0,C.t)("keyActivationTab"),automationId:"activation_settings_tab"},s().createElement(vt,null))))}const Ht=()=>s().createElement(m.k.Provider,{value:(0,m.S)(window)},s().createElement($t,null)),jt=document.getElementById("settings_container");jt&&((e=>{(0,u.R9)(ue,{reducer:ce(me(e)),actions:a,selectors:r,controls:l,resolvers:{}})})(window),c().render(s().createElement(Ht,null),jt))},65311:function(e){e.exports=jQuery}},function(e){e.O(0,[351],(function(){return 43050,e(e.s=43050)})),e.O()}]);